<%= form_with model: test_message,
      url: send_test_local_authority_notify_path(@local_authority),
      method: :post,
      data: {turbo: false},
      builder: GOVUKDesignSystemFormBuilder::FormBuilder do |f| %>
  <%= f.govuk_error_summary %>

  <%= f.hidden_field :channel %>
  <%= f.hidden_field :template_id %>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

    <% if test_message.channel == "email" %>
      <%= f.govuk_email_field :email, label: {text: t(".email", default: "Email address")} %>
      <%= f.govuk_text_field :subject, label: {text: t(".subject", default: "Subject")} %>
      <%= f.govuk_text_field :body, rows: 6, label: {text: t(".body", default: "Body")} %>
    <% else %>
      <%= f.govuk_phone_field :phone, label: {text: t(".phone", default: "Phone number")} %>
      <%= f.govuk_text_field :body, rows: 6, label: {text: t(".body", default: "Body")} %>
    <% end %>

    </div>
  </div>

  <%= f.govuk_submit t(".send_test_button", default: "Send test") %>
  <%= back_link %>
<% end %>
