<%= content_tag(:div, data: { controller: "delete-record" }) do %>
  <%= render(
    PlanningApplications::Assessment::PolicyClasses::CommentFieldComponent.new(
      policy: policy,
      policy_index: policy_index,
      comment: comment
    )
  ) %>
  <% if comment.present? %>
    <%= button_tag(
      t(".delete_comment"),
      class: "button-as-link",
      type: "button",
      data: {
        action: "click->delete-record#handleClick",
        delete_record_action: "patch",
        delete_record_path: planning_application_policy_class_policy_comment_path(
          planning_application,
          policy_class,
          policy,
          comment,
          policy_index: policy_index
        )
      }
    ) %>
  <% end %>
  <%= render(
    partial: "shared/policy_classes/previous_comments",
    locals: { previous_comments: policy.previous_comments }
  ) %>
<% end %>
