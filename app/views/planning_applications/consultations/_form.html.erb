<%= form_with(
  model: [planning_application, consultation],
  builder: GOVUKDesignSystemFormBuilder::FormBuilder,
  url: url,
  class: "govuk-!-margin-top-5",
  id: "consultation-form",
) do |form| %>
  <%= form.govuk_error_summary(presenter: ErrorPresenter) %>
  <%= form.fields_for :neighbours, @consultation.neighbours.new do |ff| %>
    <div>
      <label for="address-autocomplete" class="govuk-heading-s">Search for neighbours by address</label>
        <span id="address-autocomplete-hint" class="govuk-hint">
          Start typing address or postcode
        </span>
      <div id="address-autocomplete-container"></div>
    </div>

    <%= ff.hidden_field :consultation_id, value: consultation.id %>
    <%= hidden_field_tag(:os_path, os_places_api_index_url) %>
    <%= hidden_field_tag(:os_polygon_path, search_addresses_by_polygon_path) %>
  <% end %>
  <%= form.submit(
    "Add neighbour",
    class: "govuk-button govuk-button--secondary govuk-!-margin-top-5"
  ) %>
<% end %>
